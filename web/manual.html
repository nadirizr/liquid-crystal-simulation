
<HTML>
<HEAD>
   <TITLE>Download and Manual Instructions</TITLE>

</HEAD>
<a name="up"/>
<BODY BGCOLOR="#FFFFFF" vLink=#4C0B5F aLink=#4C0B5F link=#4C0B5F>
<H1><CENTER>Manual Instructions</CENTER></H1>
<br><br>
<H2>Table of Contents:</H2>
<br>
<ul><li><a href="#run">How to run the system</a></li></ul>
<ul><li><a href="#structure">General structure and main components:</a></li>
<br>
<ul><li><a href="#algorithms">algorithms</a></li></ul>
<ul><li><a href="#models">models</a></li></ul>
<ul><li><a href="#potentials">potentials</a></li></ul>
<ul><li><a href="#runs">runs</a></li></ul>
</ul>
<ul><li><a href="#config">How to write a configuration file</a></li></ul>
<ul><li><a href="#potential">How to add a new potential</a></li></ul>
<ul><li><a href="#statistic">How to use the statistic page</a></li></ul>
<br>
<br><br>
<H2><center><a name="run">How to run the system:</a></center></H2>
<P>
<br>
<b>To run the system you need to have Python 2.4 and up, and if you want to use a fast version of Gay - Bern potential you need Swig 1.3 and up.</b>
<li>These are present on Phelafel and Tamnun.</li>
<br>

<br>
To start running, you only need to go to the main project library, and then write in the shell: "<b>./run.sh MODEL_NAME</b>" <br>
Where MODEL_NAME should be <b>replaced</b> with  the name of the model you use (if you don't write anything it will use the default model).
<br> You can choose - "2d_small, "3d_small", "2d_large", "3d", "fixed", "sphere" or "default".
<br>
You can also add another model as explained below in "How to write a configuration file" section.
<br>
You can find more details about each model under <a href ="#models">"Models"</a> section.
<br>
You should not write "MODEL_NAME.py" or give it a path! The system knows to take it from models library automatically.
<br>
<li>If you need <b><i>help</i></b> you can also run "<b> ./run.sh MODEL_NAME -h</b>" or "<b>./run.sh MODEL_NAME --help</b>" and get an additional help.</li>
<br>
<li>If you wish to <i><b>start from a specific temperature without creating\changing</b></i> another configuration file you can run with the command- "<b>./run.sh MODEL_NAME INITIAL_TEMPERATURE=___</b>" and complete the wanted temperature instead of the "___".</li>
<br>
<li><b>If you have already started a simulation and stopped before it has finished, the system will ask you if you want to continue the simulation- write "yes" if you do, "no" if not.</li>
<br>
<br>
After running the system you can see the visual result in AViz by running: "<b>./aviz.sh OUTPUT_TITLE</b>"<br>
Where OUTPUT_TITLE should be replaced by the name of the run directory as shown after the simulation finishes, or simply the model that was run (it will take the last one chronologically).
<br>
<li><b>You must have <a href="http://phycomp.technion.ac.il/~aviz/" target="_blanck">AViz</a> in order to use it.</b></li>
<br>
More details are under <a href="#runs">"runs"</a> section.
<br><br>
<li>If you wish to <b><i>generate some statistics</i></b> of the simulations you have done, that's also very easy - all you need to do is write in the shell (after finishing the simulations): "<b> ./generate_stat.sh MODEL_NAME</b>" <br>
That will create a web page called "compare_chart.html" inside the folder "web" with all of the statistics neatly displayed.</li>
<br>
<li>If you want to <b><i>add the animations from AViz</i></b> to those statistics you should add at the end of the line in shell that runs the statistics: "<b>-a</b>" or "<b>--aviz</b>"</li>
<br>
<li><b>You must have <a href="http://phycomp.technion.ac.il/~aviz/" target="_blanck">AViz</a> in order to use it.</b></li>
<br>
More details about the statistics are under the<a href="#statistic">"statistics"</a> section.
<br>
<div align="right"><a href="#up">[up]</a></div>
</P>
<br><br><br><br>
<H2><center><a name="structure">General structure and main components:</a></center></H2>
<br>
<P>
<center><a href="#algorithms"><img src="algorithms.jpg" height="100"/></a><a href="#models"><img src="models.jpg" height="100"/></a><a href="#potentials"><img src="potentials.jpg" height="100"/></a><a href="#runs"><img src="runs.jpg" height="100"/></a>
<img src="prtsc2.jpg" height="100"/><br><br><img src="prtsc3.jpg" height="100"/></center>

<br>
<ul><font size="+1.5"><b> lc.py - </b></font>This class represents the system that we are working with.
It holds the positions and angles of molecules in a liquid crystal, and can
perform a Monte Carlo Metropolis cooling of the liquid crystal.</ul>
<br>
<ul><font size="+1.5"><b> Constants.py - </b></font>contains physical constants such as Boltzman's constant, Planck's constant and the g factor. <br> It is possible to add some other constant here if one wishes to.
</ul><br>
<ul><font size="+1.5"><b> utils.py - </b></font>contains some useful methods, some of them can be find in newer additions of Python.
</ul>
<br>
<div align="right"><a href="#up">[up]</a></div>
<br>
<H3><center><a name="algorithms">"algorithms" folder:</a></center></H3>
This folder contains the Monte Carlo algorithm methods.
<br> You should not change anything here.
<br><div align="right"><a href="#up">[up]</a></div>
<br><br>
<H3><center><a name="models">"models" folder:</a></center></H3>
<br> You can choose: 
<ul><li><i>"fixed"</i> - the cylinders will stay at their places</li></ul>
<ul><li><i>"2d_small"</i> - A system of 3X3 cylinders in 2 dimensions, uses the Gay- Berne Potential. Periodic boundary conditions in one direction, the other is fixed.</li></ul>
<ul><li><i>"3d_small"</i> - A system of 5X5X5 cylinders in 3 dimensions, uses the Gay- Berne Potential. Periodic boundary conditions in two directions, the other is fixed.</li></ul>
<ul><li><i>"2d_large"</i> - A system of 10X10 cylinders in 2 dimensions, uses the Gay- Berne Potential.Periodic boundary conditions in one direction, the other is fixed.</li></ul>
<ul><li><i>"3d"</i> - A system of 10X10X10 cylinders in 3 dimensions, uses the Gay- Berne Potential, Periodic boundary conditions in two directions, the other is fixed.</li></ul>
<ul><li><i> "sphere"</i></li></ul>
<ul><li><i>"default"</i> = 2d_large.</li></ul>
You can also add another one as written below in <a href="#config">"How to add a configuration file"</a>. 
<br>
<div align="right"><a href="#up">[up]</a></div>
<br><br>
<H3><center><a name="potentials">"potentials" folder:</a></center></H3>
We have 
<ul><li><i>"FixedNearestNeighboursPotential"</i> approximation </li><li><i/> "SphereNearestNeighboursPotential"</i> approximation</li></ul> 
The potentials - <ul><li><i>"GayBernesPotential"</i> </li><li> <i>"LenardJonesPotential"</i></li></ul> 
You can also add another one as written below in<a href="#potential"> "How to add a new potential"</a>. 
</P>
<br>
<div align="right"><a href="#up">[up]</a></div>
<br>
<H3><center><a name="runs">"runs" folder:</a></center></H3>
After each run of the simulation the system will save all of the states it has gone through, as well as the ".xyz" files for AViz.
<br>
Inside the "runs" folder you can find a sub folder for each model you have used so far.
<br>
Any folder like this contains sub folders:
<ul><li><i>"Output"</i> - contains more folders with time stamps. the stamp is the time you started running the simulation.
Each one contains all the ".xyz" files and a list file ".lst" for AViz.</li></ul>
<ul><li><i>States</i> - contains all the states the system went through during the simulation.</li></ul>
<ul><li><i>run.log</i> - a log file with all the simulation details like shown during the simulation. </li></ul>
<ul><li><i>MODEL_NAME.py</i> - the model file the simulation was run with. </li></ul>
<br>
<div align="right"><a href="#up">[up]</a></div>
<br><br><br><br><br>
<H2><center><a name="config">How to write a configuration file:</a></center></H2>
<P>
<br>
First of all you should go to the library <i>"models"</i>, then you can copy the content of the configuration file "default.py" and name your file as you wish (with the end of .py of course). You can also copy another file that is more suitable to your needs, and change that.
<br><br>
Now you only need to change the parameters in your file, so it would be like the system you are willing to get. 
<br><br>
More explanations for some <b>system parameters</b>: <br>
<ul><li><i>DIMENSIONS</i> = [number of cylinders in x direction, number of cylinders in y direction, number of cylinders in z direction]</li></ul>
<ul><li><i>BOUNDARY_CONDITIONS</i> = ["Boundary condition for the first direction", "Boundary condition for the second direction",...,"Boundary condition for the n'th direction"] - <i>"P"</i> for Periodic, <i>"F"</i> for fixed.</li></ul>
<ul><li><i>INITIAL_SPACING</i> = [The spacing between spin locations in x direction, The spacing between spin locations in y direction , The spacing between spin locations in z direction]</li></ul>
<ul><li><i>INITIAL_SPIN_ORIENTATION</i> = [The initial spin orientation vector in x direction , The initial spin orientation vector in y direction , The initial spin orientation vector in z direction]</li></ul>
<br>
There are more parameters you can change but everything is explained in the file itself as well.
<br><br>
You can change all the <b>potential parameter</b>- <img src="meu.jpg" height="2%"/>,<img src="neu.jpg" height="2%"/> ,<img src="kappa.jpg" height="2%"/> ,<img src="kappa'.jpg" height="2%"/> ,<img src="epsilon0.jpg" height="2%"/>
<br>
<ul><li><i>POTENTIAL</i> = name of the potential approximation you want to use, your can choose-"FixedNearestNeighboursPotential" , "SphereNearestNeighboursPotential" , or add a new potential as explained below in "How to add a new potential section".</li></ul>
<ul><li><i>TWO_SPINS_POTENTIAL</i>= "GayBernesPotential" , "LenardJonesPotential" , or add a new potential as explained below in "How to add a new potential section".</li></ul>
<br><br>
You should only write the name of the potential as in the potential file, without a suffix of any kind.

<br><br>
It is also possible to change settings for nearest neighbours such as maximum radius for neighbours.<br>
You can also change the <b>Cooling and Heating Algorithms properties</b> such as (examples for cooling but the same for the heating process):
<ul><li><i>MC_COOLER_SPACING_STDEV</i> = The standard deviation of the Gaussian random spacing in the system.</li></ul>
<ul><li><i>MC_COOLER_SPACING_FROM_ORIGINAL_LOCATION_CUTOFF</i> = The maximum radius from the original location where the molecule can be.</li></ul>
<ul><li><i>MC_COOLER_SPIN_STDEV</i> = The standard deviation of the Gaussian random spin orientation.</li></ul>
<ul><li><i>MC_COOLER_METROPOLIS_NUM_STEPS</i> = the number of Metropolis steps to perform in each cooling steps.</li></ul>
<ul><li><i>MC_COOLER_MAX_STEPS</i> = the number of steps in the cooling process to perform the Metropolis algorithm before lowering the temperature further.</li></ul>
<ul><li><i>MC_COOLER_TEMPERATURES</i> = frange(INITIAL_TEMPERATURE, FINAL_TEMPERATURE, -CHANGING_IN_EACH_STEP)</ul>
<ul><li><i>MC_COOLER_AVIZ_OUTPUT_PATH</i> = The path to which to output the AVIZ files</li></ul>

<br>
<font size="+1"><b> You should only change the values and nothing else! </b></font>
<br>
<div align="right"><a href="#up">[up]</a></div>
</P>
<br><br><br><br><br>
<H2><center><a name="potential">How to add a new potential:</a></center></H2>
<br>
<P>
First of all you should go to the library "potentials", then you should copy the content of the file "potential.py" and name your file as you wish (with the end of .py of course). You might opt to copy an existing potential that more closely fits your needs, and create a new file to start with.
<br><br>
The next step is to change the class name:
<ul>
<li>If you want to add a new type of approximation you can delete everything under "TwoSpinsPotential" and change the name of Potential to the new approximation. </li>
<li>If you want to add a new potential you can delete everything between "Potential" and "TwoSpinsPotential" and change the name of TwoSpinsPotential to the new potential. </li>
</ul>
<br>
Now you need to write the calculation code. Use other potentials as boiler plates, they are well documented.
<br> The last thing is to write the name of the new potential in the configuration file. (you can read more about <a href="#config">how to create a new configuration file above</a>.)
</P>
<div align="right"><a href="#up">[up]</a></div>
<br>
<br><br><br>
<H2><center><a name="statistic">How to use the statistics page</a></center></H2>
<br>
<li>In order to <i><b>change the axes</b></i> you should only click on the axis's name and change it to what you want, the Chart will change respectively. </li>
<br>
<li>If you choose a place in the scroll-bar you will see the animation moving on the right of the page showing the right points on the left chart. </li>
<br>
<li>You must have run the statistic generator with the <b><i>"-a"</i></b> or <b><i>"--aviz"</i></b> command </li> to see the Aviz pictures on the right of the page.
<br>
read more about it in <a href="#run">"how to run the system"</a> section.</li>
<br>
<li>It is also possible to choose the models you wish to investigate. It is done by selecting the wanted models on the right side of the main chart. </li> 
<br>
<li>Another thing you can change is the <b><i>colour of the points in the chart</i></b>, on the right of the chart, according to temperature for example.</li>
<br>
<li>You can also change the <b><i>type of chart</i></b>- linear, time bubbles etc...</li>
<br>
<br>

<br>
<div align="right"><a href="#up">[up]</a></div>
<br>
</BODY>
</HTML>
